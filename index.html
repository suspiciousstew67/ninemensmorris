<!-- START OF FINAL INDEX.HTML -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Nine Men's Morris</title>
    
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div id="update-notification" class="update-notification">
        <div class="update-content">
            <i class="fas fa-download update-icon"></i>
            <div class="update-text"><div id="update-message" class="update-message">Update available</div></div>
            <div class="update-actions">
                <button id="download-update-btn" class="update-btn update-btn-primary"><i class="fas fa-external-link-alt"></i> Download</button>
                <button id="dismiss-update-btn" class="update-btn update-btn-secondary"><i class="fas fa-times"></i></button>
            </div>
        </div>
    </div>

    <div id="game-container" class="mobile-layout">
        <div id="player2-panel" class="player-panel top-player">
            <div class="player-avatar ai-avatar">AI</div>
            <div class="player-info">
                    <div style="display:flex;align-items:center;gap:8px;">
                    <div id="player2-name" class="player-name">Hard AI</div>
                </div>
                <div id="player2-pieces" class="pieces-count">9 pieces remaining</div>
            </div>
            <div class="ai-thinking">Thinking...</div>
        </div>

        <div class="game-board-container">
             <div class="game-board"><svg id="game-board-svg" class="board-svg" viewBox="0 0 400 400"><g class="board-lines"><rect x="20" y="20" width="360" height="360"/><rect x="80" y="80" width="240" height="240"/><rect x="140" y="140" width="120" height="120"/><line x1="200" y1="20" x2="200" y2="140"/><line x1="200" y1="260" x2="200" y2="380"/><line x1="20" y1="200" x2="140" y2="200"/><line x1="260" y1="200" x2="380" y2="200"/></g><g class="board-positions"><g class="position-group" transform="translate(20, 20)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="0"/></g><g class="position-group" transform="translate(200, 20)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="1"/></g><g class="position-group" transform="translate(380, 20)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="2"/></g><g class="position-group" transform="translate(380, 200)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="3"/></g><g class="position-group" transform="translate(380, 380)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="4"/></g><g class="position-group" transform="translate(200, 380)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="5"/></g><g class="position-group" transform="translate(20, 380)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="6"/></g><g class="position-group" transform="translate(20, 200)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="7"/></g><g class="position-group" transform="translate(80, 80)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="8"/></g><g class="position-group" transform="translate(200, 80)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="9"/></g><g class="position-group" transform="translate(320, 80)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="10"/></g><g class="position-group" transform="translate(320, 200)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="11"/></g><g class="position-group" transform="translate(320, 320)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="12"/></g><g class="position-group" transform="translate(200, 320)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="13"/></g><g class="position-group" transform="translate(80, 320)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="14"/></g><g class="position-group" transform="translate(80, 200)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="15"/></g><g class="position-group" transform="translate(140, 140)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="16"/></g><g class="position-group" transform="translate(200, 140)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="17"/></g><g class="position-group" transform="translate(260, 140)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="18"/></g><g class="position-group" transform="translate(260, 200)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="19"/></g><g class="position-group" transform="translate(260, 260)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="20"/></g><g class="position-group" transform="translate(200, 260)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="21"/></g><g class="position-group" transform="translate(140, 260)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="22"/></g><g class="position-group" transform="translate(140, 200)"><circle class="piece" r="16"/><circle class="hitbox" r="18" data-position="23"/></g></g></svg></div>
        </div>

        <div id="player1-panel" class="player-panel bottom-player">
            <div class="player-avatar your-avatar">H</div>
            <div class="player-info">
                <div class="player-name-container">
                    <span id="player1-name" class="player-name">You</span>
                    <input type="text" id="player1-name-input" class="player-name-input hidden" maxlength="15">
                </div>
                <div id="player1-pieces" class="pieces-count">9 pieces remaining</div>
            </div>
            <div class="player-controls">
                <button id="reset-button" class="control-button"><i class="fas fa-times"></i></button>
                <button id="play-again-button" class="control-button play-again-button hidden"><i class="fas fa-redo"></i></button>
                <button id="settings-button" class="control-button"><i class="fas fa-cog"></i></button>
            </div>
        </div>
    </div>
    
    <div id="settings-modal" class="modal-overlay hidden">
        <div class="settings-panel">
            <div class="settings-header">
                <h2><i class="fas fa-cog"></i> Settings</h2>
                <button id="close-settings-button" class="close-button"><i class="fas fa-times"></i></button>
            </div>
            <div class="settings-options">
                <div class="setting-row" id="gametype-setting">
                    <span class="setting-label">Game Type</span>
                    <span class="setting-value" id="gametype-value">vs. AI</span>
                </div>
                <div class="setting-row" id="difficulty-setting">
                    <span class="setting-label">AI Difficulty</span>
                    <span class="setting-value" id="difficulty-value">Hard</span>
                </div>

                <!-- MODIFIED: Network panel is now split into two views -->
                <div id="network-settings" class="hidden">
                    <div id="network-actions" class="network-panel">
                        <button id="host-game-btn" class="network-btn host-btn"><i class="fas fa-server"></i> Host Game</button>
                        <div class="join-container">
                             <input type="text" id="join-ip-input" placeholder="Enter Room Code">
                             <button id="join-game-btn" class="network-btn join-btn"><i class="fas fa-plug"></i> Join</button>
                        </div>
                    </div>
                    <div id="host-info-panel" class="network-panel hidden">
                        <div class="host-info-title">YOUR ROOM CODE:</div>
                        <div id="room-code-display" class="room-code">----</div>
                        <div id="host-status" class="host-status-text">Waiting for opponent...</div>
                        <div class="ping-indicator hidden">
                            <div class="ping-label">Ping: <span id="ping-value">--</span> ms</div>
                            <div class="ping-bar">
                                <div id="ping-fill" class="ping-fill" style="width: 0%"></div>
                            </div>
                        </div>
                        <button id="cancel-host-btn" class="network-btn cancel-btn"><i class="fas fa-ban"></i> Cancel</button>
                    </div>
                </div>
                
                <div class="setting-row" id="gamemode-setting">
                    <span class="setting-label">Game Mode</span>
                    <span class="setting-value" id="gamemode-value">Simple</span>
                </div>
                <div class="setting-row" id="darkmode-setting">
                    <span class="setting-label">Dark Mode</span>
                    <span class="setting-value" id="darkmode-value">On</span>
                </div>
                <div class="setting-row" id="about-row">
                    <span class="setting-label">About</span>
                    <span class="setting-value">Info & Debug</span>
                </div>
            </div>
        </div>
    </div>
    
    <div id="name-prompt-modal" class="modal-overlay hidden">
        <div class="name-prompt-panel">
            <div class="name-prompt-header">
                <h2>Enter Your Name</h2>
            </div>
            <div class="name-prompt-content">
                <p class="name-prompt-subtitle">What's your name?</p>
                <input type="text" id="name-prompt-input" class="name-prompt-input" placeholder="Your name" maxlength="15">
                <div class="name-prompt-buttons">
                    <button id="name-prompt-confirm" class="name-prompt-btn confirm-btn">Continue</button>
                    <button id="name-prompt-cancel" class="name-prompt-btn cancel-btn">Skip</button>
                </div>
            </div>
        </div>
    </div>
    
    <div id="confetti-container"></div>
    <!-- About modal (separate from settings) -->
    <div id="about-modal" class="modal-overlay hidden">
        <div class="settings-panel">
            <div class="settings-header">
                <h2><i class="fas fa-info-circle"></i> About & Debug</h2>
                <button id="about-back-btn" class="close-button"><i class="fas fa-times"></i></button>
            </div>
            <div class="settings-options">
                <div class="about-content">
                    <p>Repository: <a id="about-github" href="https://github.com/suspiciousstew67/ninemensmorris" target="_blank">suspiciousstew67/ninemensmorris</a></p>
                    <p>App build: <span id="about-build">dev</span></p>
                    <div class="debug-box" id="debug-box">Loading debug info...</div>
                    <div class="about-actions">
                        <button id="copy-debug-btn" class="network-btn">Copy Debug Info</button>
                        <button id="open-repo-btn" class="network-btn">Open GitHub</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="ai.js"></script>
    <script src="script.js"></script>
    
</body>
</html>